% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compare.R
\name{compare_groups}
\alias{compare_groups}
\title{Generate Group Comparison Plots and Statistics}
\usage{
compare_groups(
  data,
  category,
  Vars,
  category_sep = " | ",
  repeat_category = NULL,
  repeat_levels = NULL,
  plots = TRUE,
  plot_style = c("points", "boxplot", "bar", "violin", "ggstatsplot"),
  table = TRUE,
  type = "auto",
  bayesian = FALSE,
  equivalence = FALSE,
  equivalence_bounds = c(-0.5, 0.5),
  nonparametric = FALSE,
  p_adjust_method = "none",
  posthoc = TRUE,
  posthoc_method = "games-howell",
  posthoc_table = FALSE,
  pairwise_display = "significant",
  min_threshold = 0.05,
  min_subcategory = 5,
  colors = NULL,
  verbose = TRUE,
  combined_table = TRUE
)
}
\arguments{
\item{data}{A data frame containing the variables to analyze.}

\item{category}{Character. Name(s) of the grouping variable(s). Can be:
\itemize{
  \item Single variable: `"gender"` - compare groups defined by gender
  \item Multiple variables: `c("gender", "treatment")` - compare interaction
    groups (e.g., "Male | Treatment", "Female | Control")
}}

\item{Vars}{A character vector of numeric variable names to compare across
groups. Example: `c("score1", "score2", "reaction_time")`.}

\item{category_sep}{Character. Separator for combined group labels when
multiple variables are passed to `category`. Default: `" | "`.}

\item{repeat_category}{Optional character. Name of a stratification variable.
When provided, separate analyses are performed for each level (e.g., analyze
gender differences separately for each country).}

\item{plots}{Logical. Generate visualizations? Default: `TRUE`.}

\item{plot_style}{Character. Style of plots to generate:
\describe{
  \item{`"points"` (default)}{Jittered points with mean and CI error bars - clean and modern}
  \item{`"boxplot"`}{Modern boxplot with jittered points overlay}
  \item{`"bar"`}{Bar plot with CI error bars - classic presentation style}
  \item{`"violin"`}{Violin plot with inner boxplot showing distribution shape}
  \item{`"ggstatsplot"`}{Original ggstatsplot style with statistical annotations
    (requires ggstatsplot package - will prompt to install if missing)}
}}

\item{table}{Logical. Generate summary statistics table? Default: `TRUE`.}

\item{type}{Character. Type of statistical test to use. Options:
\describe{
  \item{`"auto"` (default)}{Automatic selection: parametric tests}
  \item{`"parametric"`, `"p"`}{Parametric tests (t-test for 2 groups, ANOVA for 3+)}
  \item{`"nonparametric"`, `"np"`}{Nonparametric tests (Mann-Whitney/Kruskal-Wallis)}
  \item{`"kw"`}{Kruskal-Wallis (same as "np", for 3+ groups)}
  \item{`"mw"`}{Mann-Whitney (same as "np", for 2 groups)}
  \item{`"bayes"`, `"bf"`}{Bayesian tests with Bayes Factors}
}}

\item{bayesian}{Logical. Compute Bayesian t-tests with Bayes Factors? Default: `FALSE`.
Requires the BayesFactor package. Can also use `type = "bayes"`.}

\item{equivalence}{Logical. Perform equivalence testing (TOST)? Default: `FALSE`.
Requires the TOSTER package.}

\item{equivalence_bounds}{Numeric vector of length 2. Equivalence bounds in
Cohen's d units for TOST. Default: `c(-0.5, 0.5)`.}

\item{nonparametric}{Logical. Use nonparametric tests? Default: `FALSE`.
When TRUE, uses Mann-Whitney U (2 groups) or Kruskal-Wallis (3+ groups).}

\item{p_adjust_method}{Method for multiple comparison correction. Options:
`"none"`, `"bonferroni"`, `"holm"`, `"hochberg"`, `"BH"`, `"BY"`, `"fdr"`.
Default: `"none"`. Applied to both tables and post-hoc tests.}

\item{posthoc}{Logical. Compute post-hoc pairwise comparisons for 3+ groups?
Default: `TRUE`. Results include a comparison table and text report.}

\item{posthoc_method}{Method for post-hoc comparisons. Options:
\itemize{
  \item `"games-howell"` (default): Does not assume equal variances
  \item `"tukey"`: Tukey's HSD, assumes equal variances
}}

\item{pairwise_display}{Which pairwise comparisons to show on plots? Options:
`"significant"` (default), `"all"`, `"none"`.}

\item{min_threshold}{Numeric. Minimum proportion (0-1) of total sample required
to include a repeat_category level. Default: `0.05` (5%).}

\item{min_subcategory}{Integer. Minimum observations per group within
repeat_category levels. Default: `5`.}

\item{colors}{Character vector of colors for groups. Default: `NULL` uses
a built-in palette.}

\item{verbose}{Logical. Print progress messages? Default: `TRUE`.}

\item{combined_table}{Logical. When `repeat_category` is used, combine all
results into a single table? Default: `TRUE`. The combined table shows
all repeat_category levels together with bold highest means and red
significant p-values.}
}
\value{
A list with class "comparison_results" containing:
\itemize{
  \item plots: Named list of ggplot objects, one per variable
  \item grid_plot: Combined plot grid (if multiple variables)
  \item summary_table: Formatted gt table with statistics
  \item summary_data: Data frame with raw statistics
}
For stratified analysis (with repeat_category), returns a named list
where each element corresponds to a level of repeat_category.
}
\description{
A comprehensive function for comparing groups using publication-ready
visualizations and statistical tests. Creates `ggbetweenstats` plots from
the ggstatsplot package with automatic test selection based on the number
of groups:

\itemize{
  \item **2 groups**: t-test (parametric) or Mann-Whitney U (nonparametric)
  \item **3+ groups**: ANOVA (parametric) or Kruskal-Wallis (nonparametric)
    with post-hoc pairwise comparisons
}

The function also supports Bayesian analysis, equivalence testing (TOST),
and stratified analyses using `repeat_category`.
}
\examples{
\dontrun{
# ============================================================
# EXAMPLE 1: Basic Two-Group Comparison (t-test)
# ============================================================
data <- data.frame(
  gender = rep(c("Male", "Female"), each = 50),
  score = c(rnorm(50, mean = 100, sd = 15),
            rnorm(50, mean = 105, sd = 15))
)

results <- compare_groups(
  data = data,
  category = "gender",
  Vars = c("score")
)

# View the plot
results$plots$gender_vs_score

# View summary statistics
results$summary_data

# ============================================================
# EXAMPLE 2: Three-Group Comparison (ANOVA with post-hoc)
# ============================================================
data <- data.frame(
  country = rep(c("USA", "UK", "Germany"), each = 40),
  score1 = c(rnorm(40, 75, 10), rnorm(40, 70, 11), rnorm(40, 85, 9)),
  score2 = c(rnorm(40, 50, 8), rnorm(40, 55, 9), rnorm(40, 48, 7))
)

results <- compare_groups(
  data = data,
  category = "country",
  Vars = c("score1", "score2"),
  posthoc = TRUE,
  posthoc_method = "tukey",
  pairwise_display = "all"
)

# View post-hoc pairwise comparisons
results$summary_data$posthoc_results[[1]]

# Print full ANOVA report
cat(results$summary_data$anova_report[1])

# ============================================================
# EXAMPLE 3: Bayesian Analysis
# ============================================================
results <- compare_groups(
  data = data,
  category = "country",
  Vars = c("score1"),
  bayesian = TRUE
)

# View Bayes Factors
results$summary_data[, c("country", "mean", "bf10", "bf_interpretation")]

# ============================================================
# EXAMPLE 4: Nonparametric Tests
# ============================================================
results <- compare_groups(
  data = data,
  category = "country",
  Vars = c("score1"),
  nonparametric = TRUE  # Uses Kruskal-Wallis + pairwise Wilcoxon
)

# ============================================================
# EXAMPLE 5: Stratified Analysis (separate tests per subgroup)
# ============================================================
data <- data.frame(
  country = rep(c("USA", "UK", "Germany"), each = 60),
  gender = rep(c("Male", "Female"), times = 90),
  score = rnorm(180, mean = 100, sd = 15)
)

# Compare gender WITHIN each country
results <- compare_groups(
  data = data,
  category = "gender",
  Vars = c("score"),
  repeat_category = "country"
)

# Access results by country
results$USA$summary_data
results$UK$plots$gender_vs_score
results$Germany$summary_table

# ============================================================
# EXAMPLE 6: Equivalence Testing (TOST)
# ============================================================
results <- compare_groups(
  data = data,
  category = "gender",
  Vars = c("score"),
  equivalence = TRUE,
  equivalence_bounds = c(-0.3, 0.3)  # Small effect bounds
)

# Check equivalence conclusions
results$summary_data[, c("gender", "mean", "equivalence_conclusion")]

# ============================================================
# EXAMPLE 7: Combined/Interaction Groups
# ============================================================
data <- data.frame(
  strength = rep(c("Strong", "Weak"), each = 60),
  gender = rep(c("Male", "Female"), times = 60),
  score = rnorm(120, mean = 100, sd = 15)
)

# Pass multiple variables to category for interaction groups
results <- compare_groups(
  data = data,
  category = c("strength", "gender"),  # Creates "Strong | Male", "Strong | Female", etc.
  Vars = c("score")
)

# Custom separator
results <- compare_groups(
  data = data,
  category = c("strength", "gender"),
  category_sep = " x ",  # Creates "Strong x Male", etc.
  Vars = c("score")
)
}

}
\seealso{
\code{\link[ggstatsplot]{ggbetweenstats}} for the underlying plot function
}
